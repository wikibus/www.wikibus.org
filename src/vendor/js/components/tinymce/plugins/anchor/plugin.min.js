!(function () {
  const e = tinymce.util.Tools.resolve('tinymce.PluginManager'); const a = function (e) { return /^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e) }; const t = function (e) { const t = e.selection.getNode(); return t.tagName === 'A' && e.dom.getAttrib(t, 'href') === '' ? t.getAttribute('id') || t.getAttribute('name') : '' }; const r = function (e, t) { const n = e.selection.getNode(); n.tagName === 'A' && e.dom.getAttrib(n, 'href') === '' ? (n.removeAttribute('name'), n.id = t, e.undoManager.add()) : (e.focus(), e.selection.collapse(!0), e.execCommand('mceInsertContent', !1, e.dom.createHTML('a', { id: t }))) }; const n = function (o) { const e = t(o); o.windowManager.open({ title: 'Anchor', size: 'normal', body: { type: 'panel', items: [{ name: 'id', type: 'input', label: 'ID', placeholder: 'example' }] }, buttons: [{ type: 'cancel', name: 'cancel', text: 'Cancel' }, { type: 'submit', name: 'save', text: 'Save', primary: !0 }], initialData: { id: e }, onSubmit(e) { let t, n; t = o, n = e.getData().id, (a(n) ? (r(t, n), 0) : (t.windowManager.alert('Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.'), 1)) || e.close() } }) }; const o = function (e) { e.addCommand('mceAnchor', () => { n(e) }) }; const i = function (o) { return function (e) { for (let t = 0; t < e.length; t++)(n = e[t]).attr('href') || !n.attr('id') && !n.attr('name') || n.firstChild || e[t].attr('contenteditable', o); let n } }; const c = function (e) { e.on('PreInit', () => { e.parser.addNodeFilter('a', i('false')), e.serializer.addNodeFilter('a', i(null)) }) }; const d = function (t) { t.ui.registry.addToggleButton('anchor', { icon: 'bookmark', tooltip: 'Anchor', onAction() { return t.execCommand('mceAnchor') }, onSetup(e) { return t.selection.selectorChangedWithUnbind('a:not([href])', e.setActive).unbind } }), t.ui.registry.addMenuItem('anchor', { icon: 'bookmark', text: 'Anchor...', onAction() { return t.execCommand('mceAnchor') } }) }; e.add('anchor', (e) => { c(e), o(e), d(e) }), function u() {}
}())
